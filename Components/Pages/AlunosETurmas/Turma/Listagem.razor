@page "/alunos-e-turmas/turmas"

@using SaemWeb.Components.Layout.Header;
@using SaemWeb.Components.Section;
@using SaemWeb.Models;
@using SaemWeb.Components.Section.ManagementDefaultSkeleton;
@using SaemWeb.Components.Section.List;
@using SaemWeb.Components.UI;
@inject NavigationManager Navigation

@inject TurmaDAO turmaDAO;

<PageTitle>Alunos e Turmas - SAEM</PageTitle>

<Header>
  <Title>
    Alunos e Turmas
  </Title>
</Header>

Visualizando listagem de
<select @onchange="OnSelectionChanged">
  <option value="turmas">Turmas</option>
  <option value="alunos">Alunos</option>
</select>

<ManagementDefaultSkeleton ButtonText="Nova Turma" ButtonHRef="/alunos-e-turmas/turmas/cadastrar">
  <ListHeader>
    <ListItem Header="true" ColumnsCount="3">
      <ChildContent>
        <span>Nome</span>
        <span>Vagas</span>
        <span>Status</span>
        <span>Ações</span>
      </ChildContent>
    </ListItem>
  </ListHeader>

  <ListItems>
    @foreach (Turma turma in turmas)
    {
      <ListItem ColumnsCount="3">
        <span>@turma.Nome</span>
        <span>@turma.Vagas</span>
        <span>@turma.Status</span>

        <ActionButtons SeeButtonHRef="./cursos/ver" EditButtonHRef="/alunos-e-turmas/turmas/editar"
          ExcludeButtonFn="Nothing" />
      </ListItem>
    }

    @if (turmas.Count == 0)
    {
      <span>Ainda não há nenhuma turma cadastrada.</span>
    }
  </ListItems>
</ManagementDefaultSkeleton>

@code {
  private List<Turma> turmas = new();
  protected override void OnInitialized()
  {
    turmas = turmaDAO.Listar();
  }

  void Nothing() { }
}

@code {
  private string selectedValue = "turmas";

  private void OnSelectionChanged(ChangeEventArgs e)
  {
    selectedValue = e.Value?.ToString();

    if (selectedValue == "alunos")
    {
      Navigation.NavigateTo("/alunos-e-turmas/alunos");
    }
  }
}