@page "/instrumentos"
@using SaemWeb.Components.Layout.Header;
@using SaemWeb.Components.Section;
@using SaemWeb.Models;
@using SaemWeb.Components.Section.ManagementDefaultSkeleton;
@using SaemWeb.Components.Section.List;
@using SaemWeb.Components.UI;
@inject InstrumentoDAO instrumentoDAO;

<PageTitle>Instrumentos - SAEM</PageTitle>

<Header>
  <Title>
    Instrumentos
  </Title>
</Header>


<GoBackButton ButtonHRef="/cursos" />

<br />

<ManagementDefaultSkeleton ButtonText="Novo Instrumento" ButtonHRef="/instrumentos/cadastrar">
  <ListHeader>
    <ListItem Header="true" ColumnsCount="3">
      <ChildContent>
        <span>Nome</span>
        <span>Tipo</span>
        <span>Ações</span>
      </ChildContent>
    </ListItem>
  </ListHeader>

  <ListItems>
    @{
      @foreach (Instrumento instrumento in instrumentos)
      {
        <ListItem ColumnsCount="2">
          <span>@instrumento.Nome</span>
          <span>@instrumento.Tipo</span>

          <ActionButtons SeeButtonHRef="./instrumentos/ver" EditButtonHRef="./instrumentos/editar"
            ExcludeButtonFn="Nothing" />
        </ListItem>
      }

      @if (instrumentos.Count == 0)
      {
        <span>Ainda não há nenhum instrumento cadastrado.</span>
      }
    }
  </ListItems>
</ManagementDefaultSkeleton>

@code {
  private List<Instrumento> instrumentos = new();
  protected override void OnInitialized()
  {
    instrumentos = instrumentoDAO.Listar();
  }

  void Nothing() { }
}